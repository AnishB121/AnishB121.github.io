<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>MoneyUp</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="static\style.css">
    </head>
    <body>
        <p>Test</p>
        <p id="wealth"></p>
        <p id="debt"></p>
        <p id="gameplay"></p>
        <div id="job-selection">
            <h3>Select a Job</h3>
            <div id="job-options"></div>
        </div>
    
        <button type="button" id="continue">Continue</button>

        <script>
            document.getElementById("gameplay").innerHTML = "Test";
        </script>

        <script>

            //todo
            // randomly generate cost for college in range and add 7% intrest rate 
            // add debt affecting stress exponential scale | set hard limit for debt at 700,000
            // add debt growth rate 
            // update job to add function to be vairable 
            // housing 
            //job experience

            class Player
            {
                constructor(name,age, wealth,stress,education, job,debt,job_experience){
                    this.name = name;
                    this.age = age;
                    this.wealth = wealth;
                    this.stress = stress; // percent from 0 -100
                    this.education = education;
                    this.job = job;// ['job_name', yearly income]
                    this.debt = debt;
                    this.job_experience = job_experience;//years 
                }
                chapter(){
                    this.age = this.age + 4;
                    this.debt *= 1.07;
                    this.wealth = this.wealth + ( 4 * this.job[1]);
                    if (this.education == "Trade School"){
                        this.stress = 70;
                    }else if (this.education == "4 Year College"){
                        this.stress = 90;
                    }else{
                        this.stress = 60;
                    }
                    // add debt affecting stress exponential scale | set hard limit for debt at 700,000
                }
                get_job() {
                    const jobs = {
                        "High School": [
                            { title: "Walmart", baseSalary: 28000 },
                            { title: "Construction ", baseSalary: 32000 },
                            { title: "McDonalds Worker", baseSalary: 25000 }
                        ],
                        "Trade School": [
                            { title: "Electrician", baseSalary: 50000 },
                            { title: "Plumber", baseSalary: 48000 },
                            { title: "Technician", baseSalary: 47000 }
                        ],
                        "4 Year College": [
                            { title: "Software Manager", baseSalary: 70000 },
                            { title: "Financial Analyst", baseSalary: 65000 },
                            { title: "Marketing Manager", baseSalary: 60000 }
                        ]
                    };

                    const experienceMultiplier = 1 + (this.job_experience / 10); 
                    const educationLevel = this.education || "None";
                    const availableJobs = jobs[educationLevel];


           
                    
                    const jobOptionsDiv = document.getElementById("job-options");
                    jobOptionsDiv.innerHTML = ""; 
                    for (const {title, baseSalary} of availableJobs){
                        const adjustedSalary = Math.round(baseSalary * 1);
                        console.log(this.job_experience);
                        const jobButton = document.createElement("button");
                        jobButton.innerText = `${title} - $${adjustedSalary}/year`;
                        jobButton.onclick = () => this.select_job(title, adjustedSalary);
                        jobOptionsDiv.appendChild(jobButton);
                        jobOptionsDiv.appendChild(document.createElement("br"));
                    }





                    document.getElementById("job-selection").style.display = "block";
                }
                select_job(jobTitle, salary) {
                    this.job = [jobTitle, salary];
                    document.getElementById("job-selection").style.display = "none";
                    display_stats();
                }
                buy(x){
                    if( this.wealth >= x){
                        this.wealth = this.wealth - x[0];
                    }else{
                        alert('your too broke to afford this');
                        }
                    }
                college(){
                    // randomly generate cost for college in range and add 7% intrest rate 
                    collegeCost = (int)(Math.random * 20000) + 10000;
                    setStress();
                    this.debt += collegeCost;
                }
                set_stress() {
                    this.stress = 0.000001* Math.pow(Math.E, this.debt);
                }
                add_debt(amount) {
                    this.debt += amount;
                    if (this.debt > 700000) debt = 700000;
                }
            }
                        
            function display_stats()
            {
                document.getElementById("debt").innerHTML = player.debt;
                document.getElementById("wealth").innerHTML = player.wealth;
            }

            function run(){
                console.log('gh');
                player.set_stress();
                document.getElementById("continue").addEventListener("click", player.chapter(), false);
                player.chapter();
                display_stats();
                player.get_job();
            }
            
            const player = new Player('setup_name_later',18,10000,0,'High School',0);
            run();
            player.chapter();
            
        </script>
    </body>
</html>